<p id="notice"><%= notice %></p>

<h1>Listing Tasks</h1>

<div class="pagination">
</div>
<%= form_for_filterrific @filterrific, html: { id: 'filterrific-no-ajax-auto-submit' } do |f| %>
  <div>
    <!-- Search -->
    <%# give the search field the 'filterrific-periodically-observed' class for live updates %>
    <%#= f.text_field(
      :search_query,
      class: 'filterrific-periodically-observed'
    ) %>
  </div>
  <div>
    State
    <%= f.select(
      :with_state,
      @filterrific.select_options[:with_state],
      { include_blank: '- Any -' }
    ) %>
  </div>
  <div>
    Sorted by
    <%= f.select(:sorted_by, @filterrific.select_options[:sorted_by]) %>
  </div>
  <div>
    <%#= link_to('Reset filters',reset_filterrific_url) %>
  </div>
  <div>
     <% @tasks.each do |task| %>
     <% @groupname = task.group %>
     <% end %>
    <%= link_to('Reload tasks', tasks_path(:groupname => @groupname)) %>

  </div>
  <%# add an automated spinner to your form when the list is refreshed %>
  <%= render_filterrific_spinner %>
    <%= f.submit 'Filter' %>
<% end %>


<%= render(
  partial: 'tasks/list',
  locals: { tasks: @tasks }
) %>
