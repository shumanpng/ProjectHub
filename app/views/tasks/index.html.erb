<p id="notice"><%= notice %></p>

<h1>Listing Tasks</h1>

<div class="pagination">
</div>
<%= form_for_filterrific @filterrific do |f| %>
  <div>
    Search
    <%# give the search field the 'filterrific-periodically-observed' class for live updates %>
    <%= f.text_field(
      :search_query,
      class: 'filterrific-periodically-observed'
    ) %>
  </div>
  <div>
    State
    <%= f.select(
      :with_state,
      @filterrific.select_options[:with_state],
      { include_blank: '- Any -' }
    ) %>
  </div>
  <div>
    Sorted by
    <%= f.select(:sorted_by, @filterrific.select_options[:sorted_by]) %>
  </div>
  <div>
    <#%= link_to(
      'Reset filters',
      reset_filterrific_url,
    ) %>
  </div>
  <%# add an automated spinner to your form when the list is refreshed %>
  <%= render_filterrific_spinner %>
<% end %>

<%= render(
  partial: 'tasks/list',
  locals: { tasks: @tasks }
) %>



<%= will_paginate @tasks %>
<table style="width:1250px">
  <thead>
    <tr>
      <th style="width:180px">Title</th>
      <th style="width:200px">Description</th>
      <th style="width:130px">Created by</th>
      <th style="width:150px">Deadline</th>
      <th style="width:70px">Points</th>
      <th style="wdith:180px">Group</th>
      <th style="width:100px">State</th>
      <th style="width:130px">Assignee</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <% user = User.where(:id => task.assigned_to).take %>

      <tr>
        <td><%= link_to(task.title, task_path(task)) %></td>
        <td><%= task.description %></td>
        <td><%= task.created_by %></td>
        <td><%= task.deadline %></td>
        <td><%= task.points %></td>
        <td><%= task.group %></td>
        <td><%= task.state %></td>
        <td>
          <% if user == nil %>
            <%= %>
          <% else %>
            <%= user.name %>
          <% end %>
        </td>
        <td><%#= link_to 'Show', task %></td>
        <td><%= link_to 'Edit', edit_task_path(task, :groupname => task.group) %></td>
        <td><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>


<%= will_paginate @tasks %>



<%#= link_to 'Back to Group Page', group_path(@group.id)%>
<%= link_to 'Back to Group Page', groups_path %>
