<%# app/views/tasks/_list.html.erb %>
<%# code from: http://filterrific.clearcove.ca/pages/action_view_api.html %>

<div id="filterrific_results">

</br>
  <div>
     <%= page_entries_info tasks %>
   </div>

 </br>
 <%= will_paginate @tasks %>
 <table style="width:1250px">
   <thead>
     <tr>
       <!-- <th style="width:180px">Title</th> -->
      <th><%= filterrific_sorting_link(@filterrific, :title) %></th>
       <th style="width:200px">Description</th>
       <th style="width:130px">
        <%= filterrific_sorting_link(@filterrific, :created_by) %>
       </th>
       <th style="width:150px">Deadline</th>
       <th style="width:70px">Points</th>
       <th style="wdith:180px">Group</th>
       <th style="width:100px">State</th>
       <th style="width:130px">Assignee</th>
       <th colspan="3"></th>



     </tr>
   </thead>

   <tbody>
     <% @tasks.each do |task| %>
       <% user = User.where(:id => task.assigned_to).take %>

       <tr>
         <td><%= link_to(task.title, task_path(task)) %></td>
         <td><%= task.description %></td>
         <td><%= task.created_by %></td>
         <td><%= task.deadline %></td>
         <td><%= task.points %></td>
         <td><%= task.group %></td>
         <td><%= task.state %></td>

         <td>
           <% if user == nil %>
             <%= %>
           <% else %>
             <%= user.name %>
           <% end %>
         </td>
         <td><%#= link_to 'Show', task %></td>
         <td><%= link_to 'Edit', edit_task_path(task, :groupname => task.group) %></td>
         <td><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
       </tr>
     <% end %>
   </tbody>
 </table>

 <br>


 <%= will_paginate @tasks %>
</div>


 <%= link_to 'Back to Group Page', group_path(@group.id)%>
 <%#= link_to 'Back to Group Page', groups_path %>
